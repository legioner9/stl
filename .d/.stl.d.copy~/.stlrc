#!/bin/bash

dotstlrc_boot_stl() {

    c_up_boot_stl() {
        echo -e "${CYAN}---c_up() \$1 = $1---${NORMAL}" #started functions
        IFS=$' \t\n'

        # cd_h "$1" "$filename" "$LINENO"
        if [[ -d "$1" ]]; then
            cd "$1" || {
                echo "FAIL_EXEC :: 'cd $1'"
            }
        else
            echo "$1 is not dir" >&2
            return 1
        fi

        local dir
        dir=$(pwd)

        for item in *; do

            local item_path=$dir/$item

            if [ -f "$item_path" ] && [ "${item:0:1}" != "_" ] && [ "${item##*.}" = sh ]; then
                . "$item_path"

            elif
                [ -d "$item_path" ] && [ "${item:0:1}" != "_" ]
            then

                c_up_boot_stl "$item_path"

            fi

        done
    }

    export c_up_boot_stl

    c_up_boot_stl ${HOME}/.stl.d/prc.d || {
        echo "EXEC_FAIL 'c_up_boot_stl ${HOME}/.stl.d/prc.d' :: return 1" >&2
    }

    up_flag_boot_stl_fn ${HOME}/.

    read -p "enter"

    #! ~/.stl.d/stl.boot.d/stl.boot.sh : stout, stderr > ~/.stl.d/stl.bashrc.d/bashrc.log
    if [ 1 -eq ${is_stl_log} ]; then

        stlrc_log_pth="${HOME}/.stl.d/data.d/log.d/stlrc.log"
        : >${stlrc_log_pth}

        # ~/.stl.d/boot.d/stl.boot.sh

        stl_boot_sh="${HOME}/.stl.d/flow.d/boot.d/boot.sh"

        if [[ -f ${stl_fuit_sh} ]]; then if ! . ${stl_fuit_sh} &>~/.stl.d/stl.bashrc.d/bashrc.log; then
            # if [[ -f ~/.d/.rc.d/.st.rc.d/.st.rc ]]; then if ! . ~/.d/.rc.d/.st.rc.d/.st.rc >/dev/null; then
            echo "in ${HOME}/.stl.d/.stlrc : FAIL . file://${stl_fuit_sh} : return 1" >&2
            return 1
        fi; fi

    fi

    #! ~/.stl.d/stl.boot.d/stl.boot.sh : stout, stderr > /dev/null
    if [ 0 -eq ${is_stl_log} ]; then

        # ~/.stl.d/stl.boot.d/stl.boot.sh

        if [[ -f ~/.stl.d/boot.d/boot.sh ]]; then if ! . ~/.stl.d/boot.d/boot.sh &>/dev/null; then
            # if [[ -f ~/.d/.rc.d/.st.rc.d/.st.rc ]]; then if ! . ~/.d/.rc.d/.st.rc.d/.st.rc >/dev/null; then
            echo "in ~/.stl.d/.stlrc : FAIL . ~/.stl.d/boot.d/boot.sh : return 1" >&2
            return 1
        fi; fi

    fi
}

dotstlrc_boot_stl
